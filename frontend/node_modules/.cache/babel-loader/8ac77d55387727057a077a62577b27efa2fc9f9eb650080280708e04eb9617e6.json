{"ast":null,"code":"var _jsxFileName = \"/Users/meite/Desktop/X/ECNU/Blockchain/solidity-24/foundry-f24/raffle/raffle-dapp/src/App.js\",\n  _s = $RefreshSig$();\n// App.js\nimport React, { useState, useEffect } from \"react\";\nimport Web3 from \"web3\";\n\n// 合约 ABI 和地址\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst raffleABI = [{\n  \"inputs\": [{\n    \"internalType\": \"uint256\",\n    \"name\": \"entranceFee\",\n    \"type\": \"uint256\"\n  }, {\n    \"internalType\": \"uint256\",\n    \"name\": \"interval\",\n    \"type\": \"uint256\"\n  }, {\n    \"internalType\": \"address\",\n    \"name\": \"vrfCoordinator\",\n    \"type\": \"address\"\n  }, {\n    \"internalType\": \"bytes32\",\n    \"name\": \"gasLane\",\n    \"type\": \"bytes32\"\n  }, {\n    \"internalType\": \"uint256\",\n    \"name\": \"subscriptionId\",\n    \"type\": \"uint256\"\n  }, {\n    \"internalType\": \"uint32\",\n    \"name\": \"callbackGasLimit\",\n    \"type\": \"uint32\"\n  }],\n  \"stateMutability\": \"nonpayable\",\n  \"type\": \"constructor\"\n}, {\n  \"inputs\": [{\n    \"internalType\": \"address\",\n    \"name\": \"have\",\n    \"type\": \"address\"\n  }, {\n    \"internalType\": \"address\",\n    \"name\": \"want\",\n    \"type\": \"address\"\n  }],\n  \"name\": \"OnlyCoordinatorCanFulfill\",\n  \"type\": \"error\"\n}, {\n  \"inputs\": [{\n    \"internalType\": \"address\",\n    \"name\": \"have\",\n    \"type\": \"address\"\n  }, {\n    \"internalType\": \"address\",\n    \"name\": \"owner\",\n    \"type\": \"address\"\n  }, {\n    \"internalType\": \"address\",\n    \"name\": \"coordinator\",\n    \"type\": \"address\"\n  }],\n  \"name\": \"OnlyOwnerOrCoordinator\",\n  \"type\": \"error\"\n}, {\n  \"inputs\": [],\n  \"name\": \"Raffle__NotEnoughEthSent\",\n  \"type\": \"error\"\n}, {\n  \"inputs\": [],\n  \"name\": \"Raffle__RaffleNotOpen\",\n  \"type\": \"error\"\n}, {\n  \"inputs\": [],\n  \"name\": \"Raffle__TransforFailed\",\n  \"type\": \"error\"\n}, {\n  \"inputs\": [{\n    \"internalType\": \"uint256\",\n    \"name\": \"currentBalance\",\n    \"type\": \"uint256\"\n  }, {\n    \"internalType\": \"uint256\",\n    \"name\": \"numPlayers\",\n    \"type\": \"uint256\"\n  }, {\n    \"internalType\": \"uint256\",\n    \"name\": \"raffleState\",\n    \"type\": \"uint256\"\n  }],\n  \"name\": \"Raffle__UpkeepNotNeeded\",\n  \"type\": \"error\"\n}, {\n  \"inputs\": [],\n  \"name\": \"ZeroAddress\",\n  \"type\": \"error\"\n}, {\n  \"anonymous\": false,\n  \"inputs\": [{\n    \"indexed\": false,\n    \"internalType\": \"address\",\n    \"name\": \"vrfCoordinator\",\n    \"type\": \"address\"\n  }],\n  \"name\": \"CoordinatorSet\",\n  \"type\": \"event\"\n}, {\n  \"anonymous\": false,\n  \"inputs\": [{\n    \"indexed\": true,\n    \"internalType\": \"address\",\n    \"name\": \"player\",\n    \"type\": \"address\"\n  }],\n  \"name\": \"EnteredRaffle\",\n  \"type\": \"event\"\n}, {\n  \"anonymous\": false,\n  \"inputs\": [{\n    \"indexed\": true,\n    \"internalType\": \"address\",\n    \"name\": \"from\",\n    \"type\": \"address\"\n  }, {\n    \"indexed\": true,\n    \"internalType\": \"address\",\n    \"name\": \"to\",\n    \"type\": \"address\"\n  }],\n  \"name\": \"OwnershipTransferRequested\",\n  \"type\": \"event\"\n}, {\n  \"anonymous\": false,\n  \"inputs\": [{\n    \"indexed\": true,\n    \"internalType\": \"address\",\n    \"name\": \"from\",\n    \"type\": \"address\"\n  }, {\n    \"indexed\": true,\n    \"internalType\": \"address\",\n    \"name\": \"to\",\n    \"type\": \"address\"\n  }],\n  \"name\": \"OwnershipTransferred\",\n  \"type\": \"event\"\n}, {\n  \"anonymous\": false,\n  \"inputs\": [{\n    \"indexed\": true,\n    \"internalType\": \"address\",\n    \"name\": \"winner\",\n    \"type\": \"address\"\n  }],\n  \"name\": \"PickedWinner\",\n  \"type\": \"event\"\n}, {\n  \"anonymous\": false,\n  \"inputs\": [{\n    \"indexed\": true,\n    \"internalType\": \"uint256\",\n    \"name\": \"requestId\",\n    \"type\": \"uint256\"\n  }],\n  \"name\": \"RequestedRaffleWinner\",\n  \"type\": \"event\"\n}, {\n  \"inputs\": [],\n  \"name\": \"acceptOwnership\",\n  \"outputs\": [],\n  \"stateMutability\": \"nonpayable\",\n  \"type\": \"function\"\n}, {\n  \"inputs\": [{\n    \"internalType\": \"bytes\",\n    \"name\": \"\",\n    \"type\": \"bytes\"\n  }],\n  \"name\": \"checkUpkeep\",\n  \"outputs\": [{\n    \"internalType\": \"bool\",\n    \"name\": \"upkeepNeeded\",\n    \"type\": \"bool\"\n  }, {\n    \"internalType\": \"bytes\",\n    \"name\": \"\",\n    \"type\": \"bytes\"\n  }],\n  \"stateMutability\": \"view\",\n  \"type\": \"function\"\n}, {\n  \"inputs\": [],\n  \"name\": \"enterRaffle\",\n  \"outputs\": [],\n  \"stateMutability\": \"payable\",\n  \"type\": \"function\"\n}, {\n  \"inputs\": [],\n  \"name\": \"getEntranceFee\",\n  \"outputs\": [{\n    \"internalType\": \"uint256\",\n    \"name\": \"\",\n    \"type\": \"uint256\"\n  }],\n  \"stateMutability\": \"view\",\n  \"type\": \"function\"\n}, {\n  \"inputs\": [],\n  \"name\": \"getLastTimestamp\",\n  \"outputs\": [{\n    \"internalType\": \"uint256\",\n    \"name\": \"\",\n    \"type\": \"uint256\"\n  }],\n  \"stateMutability\": \"view\",\n  \"type\": \"function\"\n}, {\n  \"inputs\": [],\n  \"name\": \"getLengthOfPlayers\",\n  \"outputs\": [{\n    \"internalType\": \"uint256\",\n    \"name\": \"\",\n    \"type\": \"uint256\"\n  }],\n  \"stateMutability\": \"view\",\n  \"type\": \"function\"\n}, {\n  \"inputs\": [{\n    \"internalType\": \"uint256\",\n    \"name\": \"indexOfPlayers\",\n    \"type\": \"uint256\"\n  }],\n  \"name\": \"getPlayer\",\n  \"outputs\": [{\n    \"internalType\": \"address\",\n    \"name\": \"\",\n    \"type\": \"address\"\n  }],\n  \"stateMutability\": \"view\",\n  \"type\": \"function\"\n}, {\n  \"inputs\": [],\n  \"name\": \"getRaffleState\",\n  \"outputs\": [{\n    \"internalType\": \"enum Raffle.RaffleState\",\n    \"name\": \"\",\n    \"type\": \"uint8\"\n  }],\n  \"stateMutability\": \"view\",\n  \"type\": \"function\"\n}, {\n  \"inputs\": [],\n  \"name\": \"getRecentWinner\",\n  \"outputs\": [{\n    \"internalType\": \"address\",\n    \"name\": \"\",\n    \"type\": \"address\"\n  }],\n  \"stateMutability\": \"view\",\n  \"type\": \"function\"\n}, {\n  \"inputs\": [],\n  \"name\": \"owner\",\n  \"outputs\": [{\n    \"internalType\": \"address\",\n    \"name\": \"\",\n    \"type\": \"address\"\n  }],\n  \"stateMutability\": \"view\",\n  \"type\": \"function\"\n}, {\n  \"inputs\": [{\n    \"internalType\": \"bytes\",\n    \"name\": \"\",\n    \"type\": \"bytes\"\n  }],\n  \"name\": \"performUpkeep\",\n  \"outputs\": [],\n  \"stateMutability\": \"nonpayable\",\n  \"type\": \"function\"\n}, {\n  \"inputs\": [{\n    \"internalType\": \"uint256\",\n    \"name\": \"requestId\",\n    \"type\": \"uint256\"\n  }, {\n    \"internalType\": \"uint256[]\",\n    \"name\": \"randomWords\",\n    \"type\": \"uint256[]\"\n  }],\n  \"name\": \"rawFulfillRandomWords\",\n  \"outputs\": [],\n  \"stateMutability\": \"nonpayable\",\n  \"type\": \"function\"\n}, {\n  \"inputs\": [],\n  \"name\": \"s_vrfCoordinator\",\n  \"outputs\": [{\n    \"internalType\": \"contract IVRFCoordinatorV2Plus\",\n    \"name\": \"\",\n    \"type\": \"address\"\n  }],\n  \"stateMutability\": \"view\",\n  \"type\": \"function\"\n}, {\n  \"inputs\": [{\n    \"internalType\": \"address\",\n    \"name\": \"_vrfCoordinator\",\n    \"type\": \"address\"\n  }],\n  \"name\": \"setCoordinator\",\n  \"outputs\": [],\n  \"stateMutability\": \"nonpayable\",\n  \"type\": \"function\"\n}, {\n  \"inputs\": [{\n    \"internalType\": \"address\",\n    \"name\": \"to\",\n    \"type\": \"address\"\n  }],\n  \"name\": \"transferOwnership\",\n  \"outputs\": [],\n  \"stateMutability\": \"nonpayable\",\n  \"type\": \"function\"\n}];\nconst raffleAddress = \"0x3e670fEd42c2eEdD6d2cfC10e03f8e5840b4865F\"; // 部署的合约地址\n\nfunction App() {\n  _s();\n  // 应用状态\n  const [web3, setWeb3] = useState(null);\n  const [contract, setContract] = useState(null);\n  const [account, setAccount] = useState(null);\n  const [entranceFee, setEntranceFee] = useState(null);\n  const [players, setPlayers] = useState([]);\n  const [recentWinner, setRecentWinner] = useState(null);\n  const [raffleState, setRaffleState] = useState(null);\n  const [balance, setBalance] = useState(null);\n\n  // 初始化 Web3 和合约\n  useEffect(() => {\n    async function loadWeb3() {\n      if (window.ethereum) {\n        try {\n          const web3 = new Web3(window.ethereum);\n          console.log(\"Web3 Initialized: \", web3);\n          setWeb3(web3);\n          const accounts = await web3.eth.requestAccounts();\n          setAccount(accounts[0]);\n          const raffleContract = new web3.eth.Contract(raffleABI, raffleAddress);\n          setContract(raffleContract);\n        } catch (error) {\n          console.error(\"Error initializing web3: \", error);\n        }\n      } else {\n        console.error(\"Please install MetaMask!\");\n      }\n    }\n    loadWeb3();\n  }, []);\n\n  // 加载合约状态：获取入场费用、玩家、上次获胜者等信息\n  useEffect(() => {\n    console.log(\"Web3:\", web3);\n    console.log(\"Contract:\", contract);\n    console.log(\"Account:\", account);\n    if (contract && account && web3) {\n      async function fetchRaffleData() {\n        try {\n          const entranceFee = await contract.methods.getEntranceFee().call();\n          setEntranceFee(web3.utils.fromWei(entranceFee, \"ether\"));\n          const playerCount = await contract.methods.getLengthOfPlayers().call();\n          let playersArray = [];\n          for (let i = 0; i < playerCount; i++) {\n            const player = await contract.methods.getPlayer(i).call();\n            playersArray.push(player);\n          }\n          setPlayers(playersArray);\n          const recentWinner = await contract.methods.getRecentWinner().call();\n          setRecentWinner(recentWinner);\n          const raffleState = await contract.methods.getRaffleState().call();\n          console.log(raffleState);\n          setRaffleState(raffleState === \"0\" ? \"Open\" : \"Calculating\");\n          const contractBalance = await web3.eth.getBalance(contract.options.address);\n          setBalance(web3.utils.fromWei(contractBalance, \"ether\"));\n        } catch (error) {\n          console.error(\"Error fetching raffle data: \", error);\n        }\n      }\n      fetchRaffleData();\n    }\n  }, [contract, account, web3]);\n\n  // useEffect(() => {\n  //     if (contract && account) {\n  //         async function fetchRaffleData() {\n  //             try {\n  //                 const entranceFee = await contract.methods.getEntranceFee().call();\n  //                 setEntranceFee(web3.utils.fromWei(entranceFee, \"ether\"));\n\n  //                 const playerCount = await contract.methods.getLengthOfPlayers().call();\n  //                 let playersArray = [];\n  //                 for (let i = 0; i < playerCount; i++) {\n  //                     const player = await contract.methods.getPlayer(i).call();\n  //                     playersArray.push(player);\n  //                 }\n  //                 setPlayers(playersArray);\n\n  //                 const recentWinner = await contract.methods.getRecentWinner().call();\n  //                 setRecentWinner(recentWinner);\n\n  //                 const raffleState = await contract.methods.getRaffleState().call();\n  //                 setRaffleState(raffleState);\n\n  //                 const contractBalance = await web3.eth.getBalance(raffleAddress);\n  //                 setBalance(web3.utils.fromWei(contractBalance, \"ether\"));\n  //             } catch (error) {\n  //                 console.error(\"Error fetching raffle data: \", error);\n  //             }\n  //         }\n  //         fetchRaffleData();\n  //     }\n  // }, [contract, account, web3]);\n\n  // 用户进入 Raffle 合约\n  const enterRaffle = async () => {\n    if (contract && account) {\n      try {\n        await contract.methods.enterRaffle().send({\n          from: account,\n          value: web3.utils.toWei(entranceFee, \"ether\")\n        });\n        alert(\"Successfully entered the raffle!\");\n        window.location.reload();\n      } catch (error) {\n        console.error(\"Error entering raffle: \", error);\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Decentralized Raffle DApp\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"Connected Account:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 17\n      }, this), \" \", account ? account : \"Not connected\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Raffle Details\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Entrance Fee:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 21\n        }, this), \" \", entranceFee ? `${entranceFee} ETH` : \"Loading...\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Contract Balance:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 21\n        }, this), \" \", balance ? `${balance} ETH` : \"Loading...\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Recent Winner:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 21\n        }, this), \" \", recentWinner ? recentWinner : \"None yet\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Raffle State:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 21\n        }, this), \" \", raffleState === \"0\" ? \"Open\" : \"Calculating\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Players:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: players.length > 0 ? players.map((player, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: player\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 74\n        }, this)) : /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"No players yet\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 107\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Enter the Raffle\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: enterRaffle,\n        children: \"Enter Raffle\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 132,\n    columnNumber: 9\n  }, this);\n}\n_s(App, \"oma5nYyb0SuPqDREzGqpwgtN/1o=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","Web3","jsxDEV","_jsxDEV","raffleABI","raffleAddress","App","_s","web3","setWeb3","contract","setContract","account","setAccount","entranceFee","setEntranceFee","players","setPlayers","recentWinner","setRecentWinner","raffleState","setRaffleState","balance","setBalance","loadWeb3","window","ethereum","console","log","accounts","eth","requestAccounts","raffleContract","Contract","error","fetchRaffleData","methods","getEntranceFee","call","utils","fromWei","playerCount","getLengthOfPlayers","playersArray","i","player","getPlayer","push","getRecentWinner","getRaffleState","contractBalance","getBalance","options","address","enterRaffle","send","from","value","toWei","alert","location","reload","className","children","fileName","_jsxFileName","lineNumber","columnNumber","length","map","index","onClick","_c","$RefreshReg$"],"sources":["/Users/meite/Desktop/X/ECNU/Blockchain/solidity-24/foundry-f24/raffle/raffle-dapp/src/App.js"],"sourcesContent":["\n// App.js\nimport React, { useState, useEffect } from \"react\";\nimport Web3 from \"web3\";\n\n// 合约 ABI 和地址\nconst raffleABI = [\n    { \"inputs\": [{ \"internalType\": \"uint256\", \"name\": \"entranceFee\", \"type\": \"uint256\" }, { \"internalType\": \"uint256\", \"name\": \"interval\", \"type\": \"uint256\" }, { \"internalType\": \"address\", \"name\": \"vrfCoordinator\", \"type\": \"address\" }, { \"internalType\": \"bytes32\", \"name\": \"gasLane\", \"type\": \"bytes32\" }, { \"internalType\": \"uint256\", \"name\": \"subscriptionId\", \"type\": \"uint256\" }, { \"internalType\": \"uint32\", \"name\": \"callbackGasLimit\", \"type\": \"uint32\" }], \"stateMutability\": \"nonpayable\", \"type\": \"constructor\" }, { \"inputs\": [{ \"internalType\": \"address\", \"name\": \"have\", \"type\": \"address\" }, { \"internalType\": \"address\", \"name\": \"want\", \"type\": \"address\" }], \"name\": \"OnlyCoordinatorCanFulfill\", \"type\": \"error\" }, { \"inputs\": [{ \"internalType\": \"address\", \"name\": \"have\", \"type\": \"address\" }, { \"internalType\": \"address\", \"name\": \"owner\", \"type\": \"address\" }, { \"internalType\": \"address\", \"name\": \"coordinator\", \"type\": \"address\" }], \"name\": \"OnlyOwnerOrCoordinator\", \"type\": \"error\" }, { \"inputs\": [], \"name\": \"Raffle__NotEnoughEthSent\", \"type\": \"error\" }, { \"inputs\": [], \"name\": \"Raffle__RaffleNotOpen\", \"type\": \"error\" }, { \"inputs\": [], \"name\": \"Raffle__TransforFailed\", \"type\": \"error\" }, { \"inputs\": [{ \"internalType\": \"uint256\", \"name\": \"currentBalance\", \"type\": \"uint256\" }, { \"internalType\": \"uint256\", \"name\": \"numPlayers\", \"type\": \"uint256\" }, { \"internalType\": \"uint256\", \"name\": \"raffleState\", \"type\": \"uint256\" }], \"name\": \"Raffle__UpkeepNotNeeded\", \"type\": \"error\" }, { \"inputs\": [], \"name\": \"ZeroAddress\", \"type\": \"error\" }, { \"anonymous\": false, \"inputs\": [{ \"indexed\": false, \"internalType\": \"address\", \"name\": \"vrfCoordinator\", \"type\": \"address\" }], \"name\": \"CoordinatorSet\", \"type\": \"event\" }, { \"anonymous\": false, \"inputs\": [{ \"indexed\": true, \"internalType\": \"address\", \"name\": \"player\", \"type\": \"address\" }], \"name\": \"EnteredRaffle\", \"type\": \"event\" }, { \"anonymous\": false, \"inputs\": [{ \"indexed\": true, \"internalType\": \"address\", \"name\": \"from\", \"type\": \"address\" }, { \"indexed\": true, \"internalType\": \"address\", \"name\": \"to\", \"type\": \"address\" }], \"name\": \"OwnershipTransferRequested\", \"type\": \"event\" }, { \"anonymous\": false, \"inputs\": [{ \"indexed\": true, \"internalType\": \"address\", \"name\": \"from\", \"type\": \"address\" }, { \"indexed\": true, \"internalType\": \"address\", \"name\": \"to\", \"type\": \"address\" }], \"name\": \"OwnershipTransferred\", \"type\": \"event\" }, { \"anonymous\": false, \"inputs\": [{ \"indexed\": true, \"internalType\": \"address\", \"name\": \"winner\", \"type\": \"address\" }], \"name\": \"PickedWinner\", \"type\": \"event\" }, { \"anonymous\": false, \"inputs\": [{ \"indexed\": true, \"internalType\": \"uint256\", \"name\": \"requestId\", \"type\": \"uint256\" }], \"name\": \"RequestedRaffleWinner\", \"type\": \"event\" }, { \"inputs\": [], \"name\": \"acceptOwnership\", \"outputs\": [], \"stateMutability\": \"nonpayable\", \"type\": \"function\" }, { \"inputs\": [{ \"internalType\": \"bytes\", \"name\": \"\", \"type\": \"bytes\" }], \"name\": \"checkUpkeep\", \"outputs\": [{ \"internalType\": \"bool\", \"name\": \"upkeepNeeded\", \"type\": \"bool\" }, { \"internalType\": \"bytes\", \"name\": \"\", \"type\": \"bytes\" }], \"stateMutability\": \"view\", \"type\": \"function\" }, { \"inputs\": [], \"name\": \"enterRaffle\", \"outputs\": [], \"stateMutability\": \"payable\", \"type\": \"function\" }, { \"inputs\": [], \"name\": \"getEntranceFee\", \"outputs\": [{ \"internalType\": \"uint256\", \"name\": \"\", \"type\": \"uint256\" }], \"stateMutability\": \"view\", \"type\": \"function\" }, { \"inputs\": [], \"name\": \"getLastTimestamp\", \"outputs\": [{ \"internalType\": \"uint256\", \"name\": \"\", \"type\": \"uint256\" }], \"stateMutability\": \"view\", \"type\": \"function\" }, { \"inputs\": [], \"name\": \"getLengthOfPlayers\", \"outputs\": [{ \"internalType\": \"uint256\", \"name\": \"\", \"type\": \"uint256\" }], \"stateMutability\": \"view\", \"type\": \"function\" }, { \"inputs\": [{ \"internalType\": \"uint256\", \"name\": \"indexOfPlayers\", \"type\": \"uint256\" }], \"name\": \"getPlayer\", \"outputs\": [{ \"internalType\": \"address\", \"name\": \"\", \"type\": \"address\" }], \"stateMutability\": \"view\", \"type\": \"function\" }, { \"inputs\": [], \"name\": \"getRaffleState\", \"outputs\": [{ \"internalType\": \"enum Raffle.RaffleState\", \"name\": \"\", \"type\": \"uint8\" }], \"stateMutability\": \"view\", \"type\": \"function\" }, { \"inputs\": [], \"name\": \"getRecentWinner\", \"outputs\": [{ \"internalType\": \"address\", \"name\": \"\", \"type\": \"address\" }], \"stateMutability\": \"view\", \"type\": \"function\" }, { \"inputs\": [], \"name\": \"owner\", \"outputs\": [{ \"internalType\": \"address\", \"name\": \"\", \"type\": \"address\" }], \"stateMutability\": \"view\", \"type\": \"function\" }, { \"inputs\": [{ \"internalType\": \"bytes\", \"name\": \"\", \"type\": \"bytes\" }], \"name\": \"performUpkeep\", \"outputs\": [], \"stateMutability\": \"nonpayable\", \"type\": \"function\" }, { \"inputs\": [{ \"internalType\": \"uint256\", \"name\": \"requestId\", \"type\": \"uint256\" }, { \"internalType\": \"uint256[]\", \"name\": \"randomWords\", \"type\": \"uint256[]\" }], \"name\": \"rawFulfillRandomWords\", \"outputs\": [], \"stateMutability\": \"nonpayable\", \"type\": \"function\" }, { \"inputs\": [], \"name\": \"s_vrfCoordinator\", \"outputs\": [{ \"internalType\": \"contract IVRFCoordinatorV2Plus\", \"name\": \"\", \"type\": \"address\" }], \"stateMutability\": \"view\", \"type\": \"function\" }, { \"inputs\": [{ \"internalType\": \"address\", \"name\": \"_vrfCoordinator\", \"type\": \"address\" }], \"name\": \"setCoordinator\", \"outputs\": [], \"stateMutability\": \"nonpayable\", \"type\": \"function\" }, { \"inputs\": [{ \"internalType\": \"address\", \"name\": \"to\", \"type\": \"address\" }], \"name\": \"transferOwnership\", \"outputs\": [], \"stateMutability\": \"nonpayable\", \"type\": \"function\" }\n];\nconst raffleAddress = \"0x3e670fEd42c2eEdD6d2cfC10e03f8e5840b4865F\"; // 部署的合约地址\n\nfunction App() {\n    // 应用状态\n    const [web3, setWeb3] = useState(null);\n    const [contract, setContract] = useState(null);\n    const [account, setAccount] = useState(null);\n    const [entranceFee, setEntranceFee] = useState(null);\n    const [players, setPlayers] = useState([]);\n    const [recentWinner, setRecentWinner] = useState(null);\n    const [raffleState, setRaffleState] = useState(null);\n    const [balance, setBalance] = useState(null);\n\n    // 初始化 Web3 和合约\n    useEffect(() => {\n        async function loadWeb3() {\n            if (window.ethereum) {\n                try {\n                    const web3 = new Web3(window.ethereum);\n                    console.log(\"Web3 Initialized: \", web3);\n                    setWeb3(web3);\n\n                    const accounts = await web3.eth.requestAccounts();\n                    setAccount(accounts[0]);\n\n                    const raffleContract = new web3.eth.Contract(raffleABI, raffleAddress);\n                    setContract(raffleContract);\n                } catch (error) {\n                    console.error(\"Error initializing web3: \", error);\n                }\n            } else {\n                console.error(\"Please install MetaMask!\");\n            }\n        }\n        loadWeb3();\n    }, []);\n\n    // 加载合约状态：获取入场费用、玩家、上次获胜者等信息\n    useEffect(() => {\n        console.log(\"Web3:\", web3);\n        console.log(\"Contract:\", contract);\n        console.log(\"Account:\", account);\n\n        if (contract && account && web3) {\n            async function fetchRaffleData() {\n                try {\n                    const entranceFee = await contract.methods.getEntranceFee().call();\n                    setEntranceFee(web3.utils.fromWei(entranceFee, \"ether\"));\n\n                    const playerCount = await contract.methods.getLengthOfPlayers().call();\n                    let playersArray = [];\n                    for (let i = 0; i < playerCount; i++) {\n                        const player = await contract.methods.getPlayer(i).call();\n                        playersArray.push(player);\n                    }\n                    setPlayers(playersArray);\n\n                    const recentWinner = await contract.methods.getRecentWinner().call();\n                    setRecentWinner(recentWinner);\n\n                    const raffleState = await contract.methods.getRaffleState().call();\n                    console.log(raffleState);\n                    setRaffleState(raffleState === \"0\" ? \"Open\" : \"Calculating\");\n\n                    const contractBalance = await web3.eth.getBalance(contract.options.address);\n                    setBalance(web3.utils.fromWei(contractBalance, \"ether\"));\n                } catch (error) {\n                    console.error(\"Error fetching raffle data: \", error);\n                }\n            }\n            fetchRaffleData();\n        }\n    }, [contract, account, web3]);\n\n    // useEffect(() => {\n    //     if (contract && account) {\n    //         async function fetchRaffleData() {\n    //             try {\n    //                 const entranceFee = await contract.methods.getEntranceFee().call();\n    //                 setEntranceFee(web3.utils.fromWei(entranceFee, \"ether\"));\n\n    //                 const playerCount = await contract.methods.getLengthOfPlayers().call();\n    //                 let playersArray = [];\n    //                 for (let i = 0; i < playerCount; i++) {\n    //                     const player = await contract.methods.getPlayer(i).call();\n    //                     playersArray.push(player);\n    //                 }\n    //                 setPlayers(playersArray);\n\n    //                 const recentWinner = await contract.methods.getRecentWinner().call();\n    //                 setRecentWinner(recentWinner);\n\n    //                 const raffleState = await contract.methods.getRaffleState().call();\n    //                 setRaffleState(raffleState);\n\n    //                 const contractBalance = await web3.eth.getBalance(raffleAddress);\n    //                 setBalance(web3.utils.fromWei(contractBalance, \"ether\"));\n    //             } catch (error) {\n    //                 console.error(\"Error fetching raffle data: \", error);\n    //             }\n    //         }\n    //         fetchRaffleData();\n    //     }\n    // }, [contract, account, web3]);\n\n    // 用户进入 Raffle 合约\n    const enterRaffle = async () => {\n        if (contract && account) {\n            try {\n                await contract.methods.enterRaffle().send({\n                    from: account,\n                    value: web3.utils.toWei(entranceFee, \"ether\"),\n                });\n                alert(\"Successfully entered the raffle!\");\n                window.location.reload();\n            } catch (error) {\n                console.error(\"Error entering raffle: \", error);\n            }\n        }\n    };\n\n    return (\n        <div className=\"App\">\n            <h1>Decentralized Raffle DApp</h1>\n            <p>\n                <strong>Connected Account:</strong> {account ? account : \"Not connected\"}\n            </p>\n\n            <div>\n                <h2>Raffle Details</h2>\n                <p>\n                    <strong>Entrance Fee:</strong> {entranceFee ? `${entranceFee} ETH` : \"Loading...\"}\n                </p>\n                <p>\n                    <strong>Contract Balance:</strong> {balance ? `${balance} ETH` : \"Loading...\"}\n                </p>\n                <p>\n                    <strong>Recent Winner:</strong> {recentWinner ? recentWinner : \"None yet\"}\n                </p>\n                <p>\n                    <strong>Raffle State:</strong> {raffleState === \"0\" ? \"Open\" : \"Calculating\"}\n                </p>\n                <p>\n                    <strong>Players:</strong>\n                </p>\n                <ul>\n                    {players.length > 0 ? players.map((player, index) => <li key={index}>{player}</li>) : <p>No players yet</p>}\n                </ul>\n            </div>\n\n            <div>\n                <h2>Enter the Raffle</h2>\n                <button onClick={enterRaffle}>Enter Raffle</button>\n            </div>\n        </div>\n    );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}